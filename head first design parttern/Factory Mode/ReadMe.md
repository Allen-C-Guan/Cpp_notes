# 工厂模式
工厂模式的目的为，减少应用程序和具体类之间的依赖，促进松耦合。而思想为面向抽象，而非具体类

## 依赖倒置
要依赖抽象！不要依赖具体类！

听起来像面向接口编程，不针对实现编程。但是这里更强调**抽象**，这个原则说明了两件事
1. 不能让高层组件依赖低层组件（高层组件是由其他低层组件定义其行为的类，比如pizzaStore依赖具体pizza的行为，pizzaStore为高层组件，具体的pizza为低层组件）
2. 高层和低层都依赖抽象

那么如何具体解释呢？
比如：


                        PizzaStore
                            |
                           Pizza
                         /       \
        NystyleClamPizza         NYStyleCheesePizza
        
        
        
高层组件PizzaStore和低层组件CheesePizza等，均依赖于抽象pizza这个接口，高层组件PizzaStore不会直接感知到具体pizza之间的区别。
通过接口pizza，就将高层组件和低层组件解耦开来。
这里pizza不单纯是个接口，更重要的是，pizza是一种抽象。
而依赖接口就意味着解耦！

### 什么是倒置？
我们发现，pizzaStore竟然依赖Pizza这个低层的抽象，而低层组件CheesePizza也依赖Pizza这个高层抽象，换句话说，该抽象是位于高低之间的，适配层的感觉

那么我们应该如何才能学会依赖倒置的思考模式？
1. 自上而下的抽象，
 
 比如pizzaStore，应该要准备，烘烤，装盒等流程，而且还要制作不同口味的pizza，比如芝士的，牛肉的等。
 
2. 依赖抽象，自下而上的抽象！
    心中想着，我们不能依赖具体的细节，比如是芝士的，还是牛肉的，于是我抽象一个pizza出来吧
 
3. 自上而下的去实现
    我已经有了pizza这个接口了，我开始实现pizzaStore的时候，就不需要考虑芝士，牛肉的问题，所有实现只要考虑到pizza这个抽象层级就好了！
        
### 原则
1. 变量不可以持有具体类，只能持有抽象类，通常工厂模式就是很好的选择，这样就会隐藏实现细节，面向抽象
2. 不要让类派生自具体类，如果派生自具体类，你就会依赖具体类
3. 不要覆盖基类中已经实现的方法，一旦覆盖了，基类就不是一个真正适合作为基类的抽象了。

## 工厂模式
工厂方法模式定义了一个创建对象的接口，但由子类决定要实例化的类是哪个，工厂方法让类把实例化推迟到子类中。
### 工厂模式的实现
1. 抽象工厂父类负责控制生产流程，实体工厂子类负责具体实现。
2. 抽象产品负责接口，具体产品负责内容。
3. 具体产品由具体工厂生产

注意：
工厂类和产品类两个层级为平行的：因为他们都有抽象类，而抽象类都有许多具体的子类，每个子类都有自己特定的实现。
### 工厂类的分析
1. 抽象工厂封装的是生产流程
2. 具体工厂封装的是生产方法
3. 与简单工厂的区别：简单工厂只是将初始化的内容写在了一起而已，工厂模式却利用抽象工厂建立了流程框架，子类只要care每个流程的实现即可，
因此简单工厂不具有工厂模式的鲁棒性和可扩展性。

### 工厂模式的优点
1. 将对象的**使用**和**创造**（实例化）解耦开，
2. 产品的使用者不需要知道如何创造对象，
3. **增加**产品的或者改变产品的**实现**不会影响creator！
4. 由父类来**绝对性的**控制**产流程**，子类只能决定如何实现，但不能控制流程！
5. 工厂模式可以让客户从具体的类型中解耦出来。

## 抽象工厂模式
抽象工厂模式提供了一个接口，用于创建相关或依赖对象的家族，而不需要明确指定具体类。

### 使用方法：
抽象工厂本质上是策略模式的一种，只不过抽象工厂是根据策略来生产对象而已！

因此抽象工厂实现的方法为，通过将具体工厂组合到产品中，然后通过调用接口，来将一个家族的对象生产出来！

### 使用场景
抽象工厂方法可以用来准备类的初始数据，通常情况下，一个类的成员变量是一套数据，那么可以根据策略的不同来生产不同套的数据。
### 优点
1. 可以生产一组数据
2. 客户对具体类型不感知

### 缺点
1. 对新增产品较为敏感，需要更改抽象类。

## 抽象工厂与工厂模式的区别

1. 工厂模式只负责生产一个产品，而抽象工厂负责生产一组数据。
2. 抽象工厂采用的组合的方式（策略模式），而工厂模式采用的继承（NVI模式）。因为工厂模式控制欲更强，因为他只生产一个对象，
而抽象工厂想更加灵活，因为他需要生产一堆对象。
3. 工厂模式和抽象工厂均可以将客户从具体的类中解耦出来。只不过工厂模式采用的是继承，而抽象采用的是组合。
4. 抽象工厂对新产品的扩展是敏感的！因为抽象工厂可以生产一个家族的产品，工厂模式只是生产一个产品，当然对产品扩展不敏感了
5. 抽象工厂可以采用工厂模式来生产出自己的具体工厂来
